<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Scene Map</title>
    <link rel="stylesheet" href="../src/css/rpg-engine.css"/>
    <link rel="stylesheet" href="../src/css/custom.css"/>
</head>
<body onload="init()" style="padding:0;margin:0;">
<div id="game-content">
    <div id="container">

    </div>
    <div id="ui-root">

    </div>
</div>
<footer>
    <!-- canvas engine-->
    <script type="text/javascript" src="../plugins/canvas-engine/src/dist/js/CanvasEngine.js"></script>
    <script type="text/javascript" src="../plugins/canvas-engine/src/dist/js/CanvasLayer.js"></script>

    <!-- rpg engine-->
    <script type="text/javascript" src="../plugins/math-lib/src/Math.js"></script>
    <script type="text/javascript" src="../plugins/Mouse/src/mouse.js"></script>
    <script type="text/javascript" src="../plugins/Keyboard/src/keyboard.js"></script>
    <script type="text/javascript" src="../plugins/quadtree/src/quad-tree.js"></script>
    <script type="text/javascript" src="../src/AudioCompat.js"></script>


    <!--Main-->
    <script type="text/javascript" src="../src/System/Time/Timer_Ticker.js"></script>
    <script type="text/javascript" src="../src/RPG.js"></script>



    <!-- Resources-->
    <script type="text/javascript" src="../src/Resources/Graphics.js"></script>


    <!--Imports-->
    <script type="text/javascript" src="../src/Animation.js"></script>
    <script type="text/javascript" src="../src/Animation_Time.js"></script>
    <script type="text/javascript" src="../src/Tile.js"></script>
    <script type="text/javascript" src="../src/Animated_Tile.js"></script>
    <script type="text/javascript" src="../src/Tileset.js"></script>
    <script type="text/javascript" src="../src/Spriteset_Map.js"></script>
    <script type="text/javascript" src="../src/Game_Object.js"></script>
    <script type="text/javascript" src="../src/Game_Map.js"></script>
    <script type="text/javascript" src="../src/Consts.js"></script>
    <script type="text/javascript" src="../src/Game_Graphic.js"></script>
    <script type="text/javascript" src="../src/Item_Graphic.js"></script>
    <script type="text/javascript" src="../src/Game_Face.js"></script>
    <script type="text/javascript" src="../src/Chara.js"></script>
    <script type="text/javascript" src="../src/Charas.js"></script>
    <script type="text/javascript" src="../src/Faces.js"></script>
    <script type="text/javascript" src="../src/Game_Character.js"></script>
    <script type="text/javascript" src="../src/Game_Actor.js"></script>
    <script type="text/javascript" src="../src/Event_Page.js"></script>
    <script type="text/javascript" src="../src/Game_Event.js"></script>
    <script type="text/javascript" src="../src/Game_Item.js"></script>
    <script type="text/javascript" src="../src/Game_Skill.js"></script>





    <!-- System-->
    <script type="text/javascript" src="../src/System/Canvas.js"></script>
    <script type="text/javascript" src="../src/System/Audio/Audio_File.js"></script>
    <script type="text/javascript" src="../src/System/Audio/Audio.js"></script>







    <script type="text/javascript" src="../src/Tilesets.js"></script>


    <!--Scene-->
    <script type="text/javascript" src="../src/Scene/Scene.js"></script>
    <script type="text/javascript" src="../src/Game/Main.js"></script>
    <script type="text/javascript" src="../src/Scene/Scene_Map.js"></script>





    <script type="text/javascript" src="../src/Actors.js"></script>
    <script type="text/javascript" src="../src/Switches.js"></script>
    <script type="text/javascript" src="../src/Variables.js"></script>
    <script type="text/javascript" src="../src/Scenes.js"></script>
    <script type="text/javascript" src="../src/Maps.js"></script>
    <script type="text/javascript" src="../src/Items.js"></script>
    <script type="text/javascript" src="../src/Animations.js"></script>
    <script type="text/javascript" src="../src/Skills.js"></script>



    <!-- Loader-->
    <script type="text/javascript" src="../src/Loader/Global_Progress.js"></script>
    <script type="text/javascript" src="../src/Loader/Graphic_Loader.js"></script>
    <script type="text/javascript" src="../src/Loader/Audio_Loader.js"></script>
    <script type="text/javascript" src="../src/Loader/Scene_Loader.js"></script>
    <script type="text/javascript" src="../src/Loader/Scene_Map_Loader.js"></script>
    <script type="text/javascript" src="../src/Loader/Tileset_Loader.js"></script>

    <!-- Scene-->
    <script type="text/javascript" src="../src/Scene/Scene_Manager.js"></script>
    <script type="text/javascript" src="../src/Scene/Scene.js"></script>


    <!-- UI-->
    <script type="text/javascript" src="../src/System/UI/UI.js"></script>
    <script type="text/javascript" src="../src/System/UI/Progress_Bar.js"></script>
    <script type="text/javascript" src="../src/System/UI/Player_Info.js"></script>
    <script type="text/javascript" src="../src/System/UI/Menu.js"></script>
    <script type="text/javascript" src="../src/System/UI/Menu_Item.js"></script>
    <script type="text/javascript">
        function init() {
            var container = document.getElementById('container');
            var ui_root = document.getElementById('ui-root');

            RPG.initialize({
                container:container,
                ui_root:ui_root
            });

            RPG.Scene_Manager.new('map','intro',{
                graphics:{
                    tilesets:{
                        forest1:'http://www.agenciaw3s.com.br/dev/resources/Tilesets/WOOD%20&%20FOREST/Wood%20&%20Forest%20-%200001.png',
                        forest2:'http://www.agenciaw3s.com.br/dev/resources/Tilesets/WOOD%20&%20FOREST/Wood%20&%20Forest%20-%200091.png'
                    },
                    charasets:{
                        char01:'http://www.agenciaw3s.com.br/dev/resources/Charasets/VARIOUS%204.200/0183.png'
                    },
                    faces:{
                        face01:'http://agenciaw3s.com.br/dev/resources/Faces%20&%20Avatars/Faces/Type%20-%20Fire%20Emblem%20T.S.S/0005.png'
                    }
                },
                audios:{
                    music:{
                        music1:'http://www.agenciaw3s.com.br/dev/resources/Audio/Music%20OGG/Final%20Fantasy%20IX%20-%20Awakened%20Forest.ogg'
                    }
                },
                map:{
                    width:3200,
                    height:3200,
                    tileset:{
                        graphicID:'forest2',
                        cols:8,
                        rows:149,
                        width:256,
                        height:4768
                    },
                    spriteset:{
                        width:100,
                        height:100,
                        tileWidth:32,
                        tileHeight:32,
                        data:[]
                    }
                },
                charas:{
                    char1:{
                        graphicID:'char01',
                        rows:4,
                        cols:4
                    }
                },
                faces:{
                    face01:{
                        graphicID:'face01'
                    }
                },
                actors:{
                    1:{
                        x:450,
                        y:300,
                        charaID:'char1',
                        faceID:'face01',
                        vSpeed:32,
                        hSpeed:32,
                        animationSpeed:6,
                        type:'Player',
                        name:'Pablo Henrick Diniz'
                    }
                },
                beforeload:function(root){
                    root.UI.set('loading-progress',{
                        type:'Progress_Bar'
                    });
                    root.UI.set('player-info',{
                        type:'Player_Info'
                    });

                    root.UI.new('loading-progress','loading-progress');
                    root.UI.new('player-info','player-info');

                    root.UI.show('loading-progress');
                    root.Main.currentPlayerID = 1;
                },
                afterload:function(root){
                    root.UI.hide('loading-progress');
                    var spriteset = root.Main.currentScene.spriteset;
                    for(var i =0; i < 300;i++){
                        for(var j = 0; j < 300;j++){
                            spriteset.set(i,j,0,['forest2',0,0]);
                        }
                    }
                },
                start:function(root){
                    console.log('cena inicializada');
                    root.Main.currentScene.focus(root.Main.currentPlayer);
                    root.UI.get('player-info').face = root.Main.currentPlayer.face;
                    root.UI.get('player-info').totalMP = 500;
                    root.UI.get('player-info').MP = 400;
                    root.UI.get('player-info').name = root.Main.currentPlayer.name;
                    root.UI.show('player-info');

                },
                onprogress:function(progress){
                    var progress_bar = RPG.UI.get('loading-progress');

                    if(progress_bar != null){
                        progress_bar.progress = progress;
                    }
                }
            });

            RPG.Scene_Manager.call('intro');
        }
    </script>
</footer>
</body>
</html>