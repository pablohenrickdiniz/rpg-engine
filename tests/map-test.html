<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Scene Map</title>
    <link rel="stylesheet" href="../src/css/rpg-engine.css"/>
    <link rel="stylesheet" href="../src/css/custom.css"/>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
</head>
<body onload="init()" style="padding:0;margin:0;overflow:hidden;">
<div id="game-content">
    <div id="container">

    </div>
    <div id="ui-root">

    </div>
</div>
<footer>
    <!-- Canvas Engine-->
    <script type="text/javascript" src="../plugins/canvas-engine/src/dist/js/CanvasEngine.js"></script>
    <script type="text/javascript" src="../plugins/canvas-engine/src/dist/js/CanvasLayer.js"></script>
    <script type="text/javascript" src="../plugins/Matter/build/matter.min.js"></script>
    <!-- Rpg Engine-->
    <script type="text/javascript" src="../plugins/math-lib/src/Math.js"></script>
    <script type="text/javascript" src="../plugins/Mouse/src/mouse.js"></script>
    <script type="text/javascript" src="../plugins/Keyboard/src/keyboard.js"></script>
    <script type="text/javascript" src="../plugins/quadtree/src/quad-tree.js"></script>
    <script type="text/javascript" src="../src/AudioCompat.js"></script>

    <!--Main-->
    <script type="text/javascript" src="../src/System/Time/Timer_Ticker.js"></script>
    <script type="text/javascript" src="../src/RPG.js"></script>

    <!--Imports-->
    <script type="text/javascript" src="../src/Animation.js"></script>
    <script type="text/javascript" src="../src/Animation_Time.js"></script>
    <script type="text/javascript" src="../src/Tile.js"></script>
    <script type="text/javascript" src="../src/Animated_Tile.js"></script>
    <script type="text/javascript" src="../src/Spriteset_Map.js"></script>
    <!--Scene-->
    <script type="text/javascript" src="../src/Consts.js"></script>
    <script type="text/javascript" src="../src/System/Canvas.js"></script>
    <script type="text/javascript" src="../src/Scene/Scene.js"></script>
    <script type="text/javascript" src="../src/Game_Map.js"></script>
    <script type="text/javascript" src="../src/Game/Main.js"></script>
    <script type="text/javascript" src="../src/Game_Object.js"></script>

    <script type="text/javascript" src="../src/Graphics.js"></script>
    <script type="text/javascript" src="../src/Game_Graphic.js"></script>
    <script type="text/javascript" src="../src/Chara.js"></script>
    <script type="text/javascript" src="../src/Charas.js"></script>
    <script type="text/javascript" src="../src/Game_Face.js"></script>
    <script type="text/javascript" src="../src/Faces.js"></script>
    <script type="text/javascript" src="../src/Game_Character.js"></script>
    <script type="text/javascript" src="../src/Event_Page.js"></script>

    <script type="text/javascript" src="../src/Game_Skill.js"></script>

    <!-- System-->

    <script type="text/javascript" src="../src/System/Audio/Audio_File.js"></script>
    <script type="text/javascript" src="../src/System/Audio/Audio.js"></script>




    <script type="text/javascript" src="../src/Game_Icon.js"></script>
    <script type="text/javascript" src="../src/Icons.js"></script>
    <script type="text/javascript" src="../src/Item.js"></script>
    <script type="text/javascript" src="../src/Items.js"></script>
    <script type="text/javascript" src="../src/Game_Slot.js"></script>
    <script type="text/javascript" src="../src/Game_Inventory.js"></script>
    <script type="text/javascript" src="../src/Game_Item.js"></script>
    <script type="text/javascript" src="../src/Tileset.js"></script>
    <script type="text/javascript" src="../src/Tilesets.js"></script>





    <script type="text/javascript" src="../src/Game_Event.js"></script>
    <script type="text/javascript" src="../src/Scene/Scene_Map.js"></script>
    <script type="text/javascript" src="../src/Game_Actor.js"></script>
    <script type="text/javascript" src="../src/Item_Graphic.js"></script>
    <script type="text/javascript" src="../src/Actors.js"></script>
    <script type="text/javascript" src="../src/Switches.js"></script>
    <script type="text/javascript" src="../src/Variables.js"></script>
    <script type="text/javascript" src="../src/Scenes.js"></script>
    <script type="text/javascript" src="../src/Maps.js"></script>
    <script type="text/javascript" src="../src/Animations.js"></script>
    <script type="text/javascript" src="../src/Skills.js"></script>

    <!-- Loader-->
    <script type="text/javascript" src="../src/Loader/Global_Progress.js"></script>
    <script type="text/javascript" src="../src/Loader/Graphic_Loader.js"></script>
    <script type="text/javascript" src="../src/Loader/Audio_Loader.js"></script>
    <script type="text/javascript" src="../src/Loader/Scene_Loader.js"></script>
    <script type="text/javascript" src="../src/Loader/Scene_Map_Loader.js"></script>
    <script type="text/javascript" src="../src/Loader/Tileset_Loader.js"></script>

    <!-- Scene-->
    <script type="text/javascript" src="../src/Scene/Scene_Manager.js"></script>
    <script type="text/javascript" src="../src/Scene/Scene.js"></script>

    <!-- UI-->
    <script type="text/javascript" src="../src/System/UI/UI.js"></script>
    <script type="text/javascript" src="../src/System/UI/Element.js"></script>
    <script type="text/javascript" src="../src/System/UI/Progress_Bar.js"></script>
    <script type="text/javascript" src="../src/System/UI/Image.js"></script>
    <script type="text/javascript" src="../src/System/UI/Text.js"></script>
    <script type="text/javascript" src="../src/System/UI/Player_Info.js"></script>
    <script type="text/javascript" src="../src/System/UI/Menu.js"></script>
    <script type="text/javascript" src="../src/System/UI/Menu_Item.js"></script>
    <script type="text/javascript" src="../src/System/UI/Button.js"></script>
    <script type="text/javascript" src="../src/System/UI/Window.js"></script>
    <script type="text/javascript" src="../src/System/UI/Slot.js"></script>
    <script type="text/javascript" src="../src/System/UI/Inventory.js"></script>
    <script type="text/javascript">
        function init() {
            var container = document.getElementById('container');
            var ui_root = document.getElementById('ui-root');

            RPG.initialize({
                container:container,
                ui_root:ui_root
            });

            RPG.debug = true;


            RPG.Scene_Manager.new('map','intro',{
                graphics:{
                    tilesets:{
                        forest1:'http://localhost/resources/Tilesets/WOOD%20&%20FOREST/Wood%20&%20Forest%20-%200001.png',
                        forest2:'http://localhost/resources/Tilesets/WOOD%20&%20FOREST/Wood%20&%20Forest%20-%200091.png'
                    },
                    charasets:{
                        char01:'http://localhost/resources/Charasets/VARIOUS%204.200/0183.png',
                        male:'http://localhost/resources/White_Male_11_00_11_152_12_00_00_00_00_12_%2000_50_VX.png'
                    },
                    faces:{
                        face01:'http://localhost/resources/Faces%20&%20Avatars/Faces/Type%20-%20Fire%20Emblem%20T.S.S/0005.png'
                    },
                    icons:{
                        icon01:'http://localhost/resources/Icons/Misc%2001%20(1.970)/Misc01%20-%200005.png',
                        icon02:'http://localhost/resources/Icons/zFULL%20LOTS/Lot%200012.png'
                    }
                },
                audios:{
                    music:{
                        music1:'http://localhost/resources/Audio/Music%20OGG/Final%20Fantasy%20IX%20-%20Awakened%20Forest.ogg'
                    },
                    fx:{
                        inventory:'http://localhost/resources/Audio/Sound%20FX/Pack%20-%20Big%20Category%20Pack/COMMUN~1/SW46DE~1.ogg'
                    }
                },
                map:{
                    loop_x:true,
                    loop_y:true,
                    tileset:{
                        graphicID:'forest2',
                        cols:8,
                        rows:149,
                        width:256,
                        height:4768
                    },
                    spriteset:{
                        width:30,
                        height:30,
                        tileWidth:32,
                        tileHeight:32,
                        data:[]
                    }
                },
                objects:[

                ],
                charas:{
                    char1:{
                        graphicID:'char01',
                        rows:4,
                        cols:4
                    },
                    male1:{
                        graphicID:'male',
                        rows:4,
                        cols:3,
                        startFrame:1
                    }
                },
                faces:{
                    face01:{
                        graphicID:'face01'
                    }
                },
                actors:{
                    1:{
                        x:0,
                        y:0,
                        charaID:'char1',
                        faceID:'face01',
                        vSpeed:0.001,
                        hSpeed:0.001,
                        animationSpeed:6,
                        type:'Player',
                        name:'Pablo Henrick Diniz',
                        inventory:{
                            slots: {
                                0: {max:99},
                                1: {max:99},
                                2: {max:99},
                                3: {max:99},
                                4: {max:99},
                                5: {max:99},
                                6: {max:99},
                                7: {max:99},
                                8: {max:99},
                                9: {max:99},
                                10: {max:99},
                                11: {max:99},
                                12: {max:99},
                                13: {max:99},
                                14: {max:99},
                                15: {max:99},
                                16: {max:99},
                                17: {max:99},
                                18: {max:99},
                                19: {max:99},
                                20: {max:99},
                                21: {max:99},
                                22: {max:99},
                                23: {max:99,item:0,amount:10},
                                armor:{
                                    max:1,
                                    type:'armor'
                                },
                                boots:{
                                    max:1,
                                    type:'boots'
                                },
                                pants:{
                                    max:1,
                                    type:'pants'
                                },
                                glooves:{
                                    max:1,
                                    type:'gloves'
                                },
                                elm:{
                                    max:1,
                                    type:'elm'
                                }
                            }
                        }
                    }
                },
                icons:{
                    icon01:{
                        graphicID:'icon01'
                    },
                    apple:{
                        graphicID:'icon02',
                        sx:98,
                        sy:0,
                        sWidth:32,
                        sHeight:32
                    },
                    grape:{
                        graphicID:'icon02',
                        sx:0,
                        sy:0,
                        sWidth:32,
                        sHeight:32
                    },
                    armor:{
                        graphicID:'icon02',
                        sx:0,
                        sy:442,
                        sWidth:32,
                        sHeight:32
                    },
                    boots:{
                        graphicID:'icon02',
                        sx:0,
                        sy:480,
                        sWidth:33,
                        sHeight:32
                    },
                    elm:{
                        graphicID:'icon02',
                        sx:410,
                        sy:442,
                        sWidth:32,
                        sHeight:33
                    }
                },
                items:{
                    0:{
                        name:'sword1',
                        icon:'icon01'
                    },
                    1:{
                        name:'apple',
                        icon:'apple'
                    },
                    2:{
                        name:'grape',
                        icon:'grape'
                    },
                    3:{
                        name:'armor',
                        icon:'armor',
                        type:'armor'
                    },
                    4:{
                        name:'elm',
                        icon:'elm',
                        type:'elm'
                    },
                    5:{
                        name:'boots',
                        icon:'boots',
                        type:'boots'
                    }
                },
                beforeload:function(root){
                    var classes = root.UI.classes;
                    root.UI.root.add(new classes.Progress_Bar({
                        id:'loading-progress'
                    }));
                    root.UI.root.add(new classes.Player_Info({
                        id:'player-info',
                        visible:false
                    }));
                    root.UI.root.add(new classes.Inventory({
                        id:'inventory',
                        class:'window inventory',
                        width:200,
                        height:323,
                        visible:false,
                        draggable:true,
                        left:300,
                        top:300
                    }));

                },
                afterload:function(root){
                    root.UI.root.findById('loading-progress').visible = false;
                    var spriteset = root.Main.currentScene.spriteset;
                    var i;
                    var j;
                    for(i =0; i < spriteset.height;i++){
                        for(j = 0; j < spriteset.width;j++){
                            spriteset.set(i,j,0,['forest2',0,0]);
                        }
                    }

                    root.Main.currentPlayerID = 1;

                },
                start:function(root){
                    if(root.Main.currentPlayer){
                        root.UI.root.findById('player-info').face = root.Main.currentPlayer.face;
                        root.UI.root.findById('player-info').totalMP = 500;
                        root.UI.root.findById('player-info').MP = 400;
                        root.UI.root.findById('player-info').name = root.Main.currentPlayer.name;
                        root.UI.root.findById('player-info').visible = true;
                        root.UI.root.findById('inventory').inventory = root.Main.currentPlayer.inventory;
                    }


                    root.Controls.Keyboard.addShortcutListener('i', function () {
                        var inventory_ui = root.UI.root.findById('inventory');
                        inventory_ui.visible = !inventory_ui.visible;
                    });

                    root.Main.currentScene.focus(root.Main.currentPlayer);
                    var spriteset =root.Main.currentScene.spriteset;



                    for(var i =0; i < 2;i++){
                        var event = new root.Game_Event({
                            x:Math.floor(Math.random()*spriteset.realWidth),
                            y:Math.floor(Math.random()*spriteset.realHeight),
                            pages:[
                                new root.Event_Page({
                                    charaID:'char1'
                                })
                            ]
                        });

                        root.Main.currentScene.add(event);
                      //  event.currentPage.stepRandom(100);
                    }


                },
                onprogress:function(progress){
                    var progress_bar = RPG.UI.root.findById('loading-progress');

                    if(progress_bar != null){
                        progress_bar.progress = progress;
                    }
                }
            });

            RPG.Scene_Manager.call('intro');
        }
    </script>
</footer>
</body>
</html>